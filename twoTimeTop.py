import sys
import matplotlib.pyplot as plt
import matplotlib.animation as animation
import pymysql
from scipy import stats
import numpy as np
import datetime
import time



t= [4052.6, 4052.0, 4048.8, 4050.0, 4048.8, 4048.0, 4046.6, 4049.0, 4048.8, 4048.4, 4048.8, 4048.8, 4048.8, 4048.8, 4049.0, 4049.0, 4049.6, 4049.6, 4049.0, 4049.4, 4049.0, 4048.4, 4048.4, 4050.0, 4048.6, 4049.0, 4049.6, 4049.4, 4049.4, 4050.4, 4050.2, 4050.2, 4050.6, 4050.0, 4049.8, 4049.8, 4049.4, 4049.2, 4049.0, 4048.8, 4048.6, 4048.6, 4049.2, 4048.6, 4048.6, 4048.4, 4048.2, 4048.4, 4048.4, 4048.0, 4047.8, 4048.0, 4047.4, 4047.0, 4048.0, 4046.6, 4047.2, 4048.2, 4048.2, 4049.2, 4049.0, 4049.6, 4049.0, 4049.4, 4049.4, 4049.2, 4049.4, 4048.8, 4049.0, 4048.4, 4048.6, 4048.6, 4048.2, 4048.2, 4048.2, 4047.4, 4047.2, 4047.2, 4047.0, 4046.6, 4046.2, 4046.6, 4047.0, 4047.2, 4046.6, 4047.2, 4047.2, 4047.4, 4048.0, 4047.8, 4047.6, 4047.4, 4047.8, 4048.4, 4047.4, 4047.6, 4047.8, 4047.8, 4048.0, 4047.8, 4047.6, 4047.8, 4048.0, 4047.6, 4047.4, 4047.8, 4048.0, 4048.4, 4048.2, 4048.2, 4049.0, 4048.4, 4048.4, 4048.4, 4049.0, 4049.0, 4049.0, 4049.2, 4048.8, 4049.8, 4049.8, 4050.0, 4049.8, 4050.0, 4050.2, 4050.0, 4050.0, 4050.0, 4049.4, 4049.6, 4048.4, 4049.0, 4049.0, 4049.2, 4048.2, 4047.2, 4048.0, 4048.2, 4047.2, 4047.2, 4047.2, 4048.2, 4048.2, 4047.2, 4047.8, 4047.2, 4047.4, 4047.2, 4047.0, 4047.0, 4046.2, 4046.0, 4045.8, 4045.8, 4045.4, 4045.4, 4045.8, 4045.4, 4045.4, 4045.4, 4045.8, 4045.8, 4045.2, 4045.0, 4045.6, 4045.2, 4045.8, 4046.4, 4046.4, 4045.4, 4045.4, 4046.2, 4046.2, 4045.6, 4045.6, 4046.0, 4046.0, 4046.0, 4045.2, 4045.2, 4045.6, 4045.2, 4046.2, 4046.0, 4046.0, 4046.2, 4046.0, 4046.0, 4046.4, 4046.0, 4046.4, 4046.6, 4046.6, 4048.6, 4048.0, 4048.4, 4047.4, 4047.4, 4048.2, 4048.0, 4047.2, 4047.8, 4047.8, 4047.8, 4048.0, 4048.2, 4049.0, 4048.0, 4048.6, 4049.8, 4048.0, 4049.2, 4048.2, 4048.4, 4047.6, 4048.2, 4049.2, 4049.8, 4048.6, 4050.0, 4048.6, 4050.2, 4050.2, 4050.2, 4050.2, 4050.2, 4050.4, 4050.4, 4050.6, 4050.6, 4050.2, 4050.8, 4050.0, 4050.2, 4049.6, 4049.6, 4049.6, 4049.2, 4049.0, 4049.2, 4049.0, 4049.0, 4049.0, 4049.0, 4049.2, 4049.0, 4050.2, 4049.8, 4050.0, 4050.2, 4050.2, 4050.6, 4052.0, 4051.8, 4053.0, 4053.0, 4053.0, 4054.2, 4054.2, 4054.8, 4054.4, 4055.0, 4054.8, 4054.2, 4055.0, 4054.0, 4054.6, 4054.4, 4055.0, 4054.4, 4054.4, 4054.4, 4055.6, 4056.0, 4055.6, 4055.8, 4055.6, 4055.8, 4055.6, 4055.6, 4055.0, 4055.8, 4055.6, 4054.8, 4054.6, 4055.6, 4055.0, 4055.4, 4055.2, 4055.2, 4055.4, 4054.8, 4055.4, 4055.6, 4055.8, 4055.8, 4056.0, 4056.4, 4057.4, 4056.8, 4057.0, 4057.2, 4057.6, 4057.2, 4058.0, 4058.8, 4058.2, 4058.6, 4058.2, 4058.8, 4058.8, 4059.4, 4059.2, 4059.2, 4059.2, 4059.2, 4059.4, 4060.0, 4060.0, 4062.0, 4060.8, 4060.2, 4062.0, 4061.6, 4062.0, 4060.6, 4060.0, 4060.6, 4061.4, 4060.6, 4060.6, 4060.0, 4060.0, 4060.6, 4060.6, 4061.0, 4060.6, 4060.4, 4060.8, 4060.8, 4060.0, 4060.6, 4061.2, 4061.0, 4061.2, 4060.6, 4062.0, 4061.4, 4061.4, 4062.8, 4062.4, 4061.6, 4062.4, 4061.6, 4061.4, 4061.0, 4061.4, 4061.2, 4060.8, 4060.8, 4060.6, 4060.8, 4060.0, 4060.6, 4060.6, 4060.0, 4060.2, 4061.0, 4061.0, 4061.6, 4062.8, 4061.0, 4061.4, 4061.4, 4062.2, 4061.4, 4061.8, 4062.0, 4063.0, 4061.6, 4061.4, 4062.2, 4061.4, 4061.6, 4061.6, 4061.8, 4061.8, 4061.8, 4062.0, 4061.8, 4062.4, 4061.6, 4062.0, 4061.6, 4061.0, 4060.8, 4060.0, 4059.4, 4058.6, 4058.8, 4060.8, 4060.0, 4059.8, 4059.8, 4060.0, 4059.0, 4058.8, 4059.0, 4059.0, 4059.0, 4059.0, 4060.8, 4061.6, 4059.4, 4059.4, 4059.4, 4061.2, 4059.4, 4059.6, 4059.6, 4059.6, 4059.6, 4061.0, 4059.8, 4060.2, 4059.8, 4060.4, 4060.6, 4060.0, 4060.8, 4060.2, 4060.0, 4059.6, 4060.0, 4060.0, 4059.8, 4060.0, 4060.0, 4060.0, 4061.0, 4060.4, 4061.6, 4063.0, 4061.6, 4062.2, 4062.6, 4062.6, 4064.4, 4063.0, 4062.8, 4063.6, 4063.0, 4062.6, 4062.8, 4062.2, 4064.4, 4064.4, 4062.8, 4062.8, 4062.6, 4063.6, 4062.4, 4063.8, 4062.2, 4062.2, 4062.2, 4062.2, 4062.8, 4062.2, 4063.4, 4063.0, 4062.8, 4062.8, 4063.0, 4062.2, 4062.8, 4062.8, 4062.4, 4062.4, 4062.4, 4062.4, 4061.6, 4061.6, 4061.6, 4062.6, 4061.6, 4061.6, 4061.6, 4061.4, 4061.0, 4061.0, 4061.4, 4060.2, 4060.2, 4061.2, 4060.6, 4061.6, 4060.0, 4060.0, 4060.4, 4060.0, 4059.8, 4060.2, 4059.6, 4059.4, 4059.0, 4059.8, 4058.6, 4059.2, 4058.8, 4059.6, 4058.0, 4058.0, 4058.0, 4058.2, 4058.8, 4058.2, 4058.6, 4058.2, 4058.2, 4058.0, 4058.0, 4058.2, 4059.2, 4058.2, 4058.2, 4059.0, 4058.6, 4058.0, 4057.6, 4058.0, 4058.0, 4058.0, 4058.2, 4059.2, 4059.2, 4059.2, 4059.2, 4059.6, 4058.6, 4058.6, 4059.0, 4059.6, 4059.6, 4060.0, 4059.8, 4060.0, 4059.6, 4059.6, 4059.6, 4058.6, 4058.6, 4058.6, 4058.2, 4057.0, 4058.0, 4057.0, 4058.4, 4058.8, 4058.4, 4058.4, 4058.4, 4058.6, 4058.2, 4058.4, 4058.0, 4057.6, 4058.0, 4058.0, 4058.0, 4058.0, 4059.0, 4057.8, 4059.0, 4059.0, 4059.0, 4059.0, 4059.0, 4059.0, 4059.0, 4059.0, 4059.2, 4059.2, 4059.2, 4059.4, 4058.4, 4059.4, 4059.4, 4059.2, 4058.8, 4059.8, 4059.8, 4060.0, 4059.8, 4060.0, 4059.8, 4060.0, 4060.4, 4060.4]
#s= [4052.6, 4052.0, 4048.8, 4050.0, 4048.8, 4048.0, 4046.6, 4049.0, 4048.8, 4048.4, 4048.8, 4048.8, 4048.8, 4048.8, 4049.0, 4049.0, 4049.6, 4049.6, 4049.0, 4049.4, 4049.0, 4048.4, 4048.4, 4050.0, 4048.6, 4049.0, 4049.6, 4049.4, 4049.4, 4050.4, 4050.2, 4050.2, 4050.6, 4050.0, 4049.8, 4049.8, 4049.4, 4049.2, 4049.0, 4048.8, 4048.6, 4048.6, 4049.2, 4048.6, 4048.6, 4048.4, 4048.2, 4048.4, 4048.4, 4048.0, 4047.8, 4048.0, 4047.4, 4047.0, 4048.0, 4046.6, 4047.2, 4048.2, 4048.2, 4049.2, 4049.0, 4049.6, 4049.0, 4049.4, 4049.4, 4049.2, 4049.4, 4048.8, 4049.0, 4048.4, 4048.6, 4048.6, 4048.2, 4048.2, 4048.2, 4047.4, 4047.2, 4047.2, 4047.0, 4046.6, 4046.2, 4046.6, 4047.0, 4047.2, 4046.6, 4047.2, 4047.2, 4047.4, 4048.0, 4047.8, 4047.6, 4047.4, 4047.8, 4048.4, 4047.4, 4047.6, 4047.8, 4047.8, 4048.0, 4047.8, 4047.6, 4047.8, 4048.0, 4047.6, 4047.4, 4047.8, 4048.0, 4048.4, 4048.2, 4048.2, 4049.0, 4048.4, 4048.4, 4048.4, 4049.0, 4049.0, 4049.0, 4049.2, 4048.8, 4049.8, 4049.8, 4050.0, 4049.8, 4050.0, 4050.2, 4050.0, 4050.0, 4050.0, 4049.4, 4049.6, 4048.4, 4049.0, 4049.0, 4049.2, 4048.2, 4047.2, 4048.0, 4048.2, 4047.2, 4047.2, 4047.2, 4048.2, 4048.2, 4047.2, 4047.8, 4047.2, 4047.4, 4047.2, 4047.0, 4047.0, 4046.2, 4046.0, 4045.8, 4045.8, 4045.4, 4045.4, 4045.8, 4045.4, 4045.4, 4045.4, 4045.8, 4045.8, 4045.2, 4045.0, 4045.6, 4045.2, 4045.8, 4046.4, 4046.4, 4045.4, 4045.4, 4046.2, 4046.2, 4045.6, 4045.6, 4046.0, 4046.0, 4046.0, 4045.2, 4045.2, 4045.6, 4045.2, 4046.2, 4046.0, 4046.0, 4046.2, 4046.0, 4046.0, 4046.4, 4046.0, 4046.4, 4046.6, 4046.6, 4048.6, 4048.0, 4048.4, 4047.4, 4047.4, 4048.2, 4048.0, 4047.2, 4047.8, 4047.8, 4047.8, 4048.0, 4048.2, 4049.0, 4048.0, 4048.6, 4049.8, 4048.0, 4049.2, 4048.2, 4048.4, 4047.6, 4048.2, 4049.2, 4049.8, 4048.6, 4050.0, 4048.6, 4050.2, 4050.2, 4050.2, 4050.2, 4050.2, 4050.4, 4050.4, 4050.6, 4050.6, 4050.2, 4050.8, 4050.0, 4050.2, 4049.6, 4049.6, 4049.6, 4049.2, 4049.0, 4049.2, 4049.0, 4049.0, 4049.0, 4049.0, 4049.2, 4049.0, 4050.2, 4049.8, 4050.0, 4050.2, 4050.2, 4050.6, 4052.0, 4051.8, 4053.0, 4053.0, 4053.0, 4054.2, 4054.2, 4054.8, 4054.4, 4055.0, 4054.8, 4054.2, 4055.0, 4054.0, 4054.6, 4054.4, 4055.0, 4054.4, 4054.4, 4054.4, 4055.6, 4056.0, 4055.6, 4055.8, 4055.6, 4055.8, 4055.6, 4055.6, 4055.0, 4055.8, 4055.6, 4054.8, 4054.6, 4055.6, 4055.0, 4055.4, 4055.2, 4055.2, 4055.4, 4054.8, 4055.4, 4055.6, 4055.8, 4055.8, 4056.0, 4056.4, 4057.4, 4056.8, 4057.0, 4057.2, 4057.6, 4057.2, 4058.0, 4058.8, 4058.2, 4058.6, 4058.2, 4058.8, 4058.8, 4059.4, 4059.2, 4059.2, 4059.2, 4059.2, 4059.4, 4060.0, 4060.0, 4062.0, 4060.8, 4060.2, 4062.0, 4061.6, 4062.0, 4060.6, 4060.0, 4060.6, 4061.4, 4060.6, 4060.6, 4060.0, 4060.0, 4060.6, 4060.6, 4061.0, 4060.6, 4060.4, 4060.8, 4060.8, 4060.0, 4060.6, 4061.2, 4061.0, 4061.2, 4060.6, 4062.0, 4061.4, 4061.4, 4062.8, 4062.4, 4061.6, 4062.4, 4061.6, 4061.4, 4061.0, 4061.4, 4061.2, 4060.8, 4060.8, 4060.6, 4060.8, 4060.0, 4060.6, 4060.6, 4060.0, 4060.2, 4061.0, 4061.0, 4061.6, 4062.8, 4061.0, 4061.4, 4061.4, 4062.2, 4061.4, 4061.8, 4062.0, 4063.0, 4061.6, 4061.4, 4062.2, 4061.4, 4061.6, 4061.6, 4061.8, 4061.8, 4061.8, 4062.0, 4061.8, 4062.4, 4061.6, 4062.0, 4061.6, 4061.0, 4060.8, 4060.0, 4059.4, 4058.6, 4058.8, 4060.8, 4060.0, 4059.8, 4059.8, 4060.0, 4059.0, 4058.8, 4059.0, 4059.0, 4059.0, 4059.0, 4060.8, 4061.6, 4059.4, 4059.4, 4059.4, 4061.2, 4059.4, 4059.6, 4059.6, 4059.6, 4059.6, 4061.0, 4059.8, 4060.2, 4059.8, 4060.4, 4060.6, 4060.0, 4060.8, 4060.2, 4060.0, 4059.6, 4060.0, 4060.0, 4059.8, 4060.0, 4060.0, 4060.0, 4061.0, 4060.4, 4061.6, 4063.0, 4061.6, 4062.2, 4062.6, 4062.6, 4064.4, 4063.0, 4062.8, 4063.6, 4063.0, 4062.6, 4062.8, 4062.2, 4064.4, 4064.4, 4062.8, 4062.8, 4062.6, 4063.6, 4062.4, 4063.8, 4062.2, 4062.2, 4062.2, 4062.2, 4062.8, 4062.2, 4063.4, 4063.0, 4062.8, 4062.8, 4063.0, 4062.2, 4062.8, 4062.8, 4062.4, 4062.4, 4062.4, 4062.4, 4061.6, 4061.6, 4061.6, 4062.6, 4061.6, 4061.6, 4061.6, 4061.4, 4061.0, 4061.0, 4061.4, 4060.2, 4060.2, 4061.2, 4060.6, 4061.6, 4060.0, 4060.0, 4060.4, 4060.0, 4059.8, 4060.2, 4059.6, 4059.4, 4059.0, 4059.8, 4058.6, 4059.2, 4058.8, 4059.6, 4058.0, 4058.0, 4058.0, 4058.2, 4058.8, 4058.2, 4058.6, 4058.2, 4058.2, 4058.0, 4058.0, 4058.2, 4059.2, 4058.2, 4058.2, 4059.0, 4058.6, 4058.0, 4057.6, 4058.0, 4058.0, 4058.0, 4058.2, 4059.2, 4059.2, 4059.2, 4059.2, 4059.6, 4058.6, 4058.6, 4059.0, 4059.6, 4059.6, 4060.0, 4059.8, 4060.0, 4059.6, 4059.6, 4059.6, 4058.6, 4058.6, 4058.6, 4058.2, 4057.0, 4058.0, 4057.0, 4058.4, 4058.8, 4058.4, 4058.4, 4058.4, 4058.6, 4058.2, 4058.4, 4058.0, 4057.6, 4058.0, 4058.0, 4058.0, 4058.0, 4059.0, 4057.8, 4059.0, 4059.0, 4059.0, 4059.0, 4059.0, 4059.0, 4059.0, 4059.0, 4059.2, 4059.2, 4059.2, 4059.4, 4058.4, 4059.4, 4059.4, 4059.2, 4058.8, 4059.8, 4059.8, 4060.0, 4059.8, 4060.0, 4059.8, 4060.0, 4060.4, 4060.4]
s=[]

for i in range(len(t)):
    s.append(i)

#print(t[0:120])  
plt.plot(s, t)

#for ij in range(len(t)):
#    plt.annotate('Something', xy=(ij,ij))


f1 = np.polyfit(t, s, 3)
p1 = np.poly1d(f1)
print(p1)


#plt.annotate('local max', xy=(s[100], t[100]),arrowprops=dict(facecolor='black', shrink=0.05),)
#plt.annotate(slope, xy=(s[100], t[100]),arrowprops=dict(facecolor='black', shrink=0.05),)


#plt.draw()
#plt.pause(0.0001)
#plt.pause(1)    
#plt.clf()
plt.show()

#conn=pymysql.connect(host='localhost',user='root',password='MYSQLTB',db='shfuture')
#a=conn.cursor()
#sql = 'select lastprice, happentime   from ' + sys.argv[1]  + ' where time(happentime)<"'  + sys.argv[2]  + '";'

#a.execute(sql)
#data=a.fetchall()

#t=[]
#s=[]
#for result in data:
#    t.append(result[0])
#    #t.append(result[0].timestamp())
#    s.append(result[1])
#conn.close()    #very important , remember MUST close 


#print(t)
#print(s)
